{% extends 'default/index.html.twig' %}


{% block content_header %}
    <h1>Rechercher un bien</h1>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-sm-3">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Rechercher un bien</h3>
                </div>
                <div class="box-body">
                    {% include 'tontineBundle:Search:form.html.twig' with { form: form } %}
                </div>
            </div>
        </div>
        <div class="col-sm-9">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Résultats de la recherche</h3>
                </div>
                <div class="box-body">
                    {% if options | length > 0 %}
                        {% for option in options %}
                            <div class="well well-sm">
                                <a href="{{ path('tontine_tontines_new', {bien: option.bienTontine.id}) }}" class="btn btn-xs btn-primary pull-right">Choisir ce bien</a>
                                <p>
                                    <strong style="padding: 2px; color: darkorange" class="label-primary">Option N°{{ option.id}}</strong>
                                    <br/><strong>Code du bien: {{ option.bienTontine.code }}</strong>
                                    <br/><strong>Zone: {{ option.bienTontine.zone}}</strong>
                                    <br/><strong>Zone: {{ option.bienTontine.quartier}}</strong>
                                </p>
                                <p>{{ option.bienTontine.description }}</p> 
                                <p>
                                <table class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Durée</th>
                                            <th>Mode</th>
                                            <th>Mise</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>{{option.duree}} an(s)</td>
                                            <td>{{option.TypeTontine.libelle}}</td>
                                            <td>{{option.montant | number_format(0, ',', ' ') }} F CFA</td>
                                        </tr>
                                    </tbody>
                                </table>
                                </p>
                            </div>
                        {% endfor %}
                    {% else %} 
                        <div class="text-center">
                            Aucun bien ne corresponds aux critères.
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>            

    {% include 'default/modal.html.twig' with { modalId: 'preview-modal' } %}
    {#% include 'tontineBundle:Tontine:modals/new-modal.html.twig' %#}
    {% include 'default/modal.html.twig' with { modalId: 'edit-modal' } %}
{% endblock %}

{% block javascript %}
    {{ parent() }}
    <script type="text/javascript">
        $(function() {
            var $dureeType = $('.duree-type');

            $('#mode').on('change', function() {
                switch($(this).val()) {
                    case 'j':
                        $dureeType.text('Jours');
                        break;
                    case 'h':
                        $dureeType.text('Sem.');
                        break;
                    case 'm':
                        $dureeType.text('Mois');
                        break;
                }
            })
        });
    </script>
{% endblock %}    
